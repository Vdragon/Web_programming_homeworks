<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--（此標籤包住的內容為註解）以上為XML和DTD(Document Type
    Definition)的宣告-->
<!--
HW9-09957010
    本網頁使用的智慧財產授權：
      創用CC　姓名標示─非商業性─相同方式分享(BY-NC-SA) 目前最新版本
    詳細資料註明於下方meta元素。
已知問題：

待辦事項：

變更紀錄：

-->
<!--html標籤：html主要內容
    XHTML規範需要／選用的屬性：xmlns, xml:lang
-->
<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="zh_TW"
      lang="zh_TW">
  <!--head標籤：包含一些metadata（中介資料）-->
  <head>
    <!--title標籤：顯示於標題列(title bar)的文字-->
    <title>HW9-09957010</title>

    <!--網頁版本-->
    <meta name="webpage-version" content="0.00(0)" />
    <!--XHTML範本版本-->
    <meta name="template-version" content="1.09(13)201112081845" />
    <meta name="author" content="Vdragon" />
    <meta name="description" content="HW9-09957010" />
    <meta name="generator" content="Kate純文字編輯器" />
    <meta name="keywords" content="" />
    <meta name="robots" content="index,follow" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <!--
    <style type='text/css'></style>
    <link href='' rel='stylesheet' type='text/css' />
    <script src='' type='text/javascript'></script>
    -->
    <link href='http://ind.ntou.edu.tw/~pika1021/Stylesheets/Generic_stylesheet.css' rel='stylesheet' type='text/css' />
    <script type='text/javascript'>
      <!--
      /*對整個script啟用strict模式*/
      "use strict";

      /*一些常數參數（關鍵字const仍非標準的一部份，所以不使用）
          Are there constants in Javascript?
          http://stackoverflow.com/questions/130396/are-there-constants-in-javascript
      */
      /*表格寬度*/
      var FIELD_WIDTH = 4;

      /**建立表格函式**/
      function initGameTable(){

        /*取得game_content node*/
        var game_node = document.getElementById("div_game_content");

        /*table node variable*/
        var insert_td_node, insert_tr_node, insert_tbody_node, insert_table_node;

        /*圖片node變數*/
        var insert_img_node;

        /*建立4*4表格，由(1,1)到(4,4)*/
        var tr_count, td_count;

        /*用來測試亂數產生的圖片檔案有沒有已被用過的二維陣列*/
        var td_used = [];/* = [[false, false, false, false],
                          [false, false, false, false],
                          [false, false, false, false],
                          [false, false, false, false]]*/
        for(tr_count = 1; tr_count <= FIELD_WIDTH; tr_count++){
          td_used[tr_count - 1] = [];
          for(td_count = 1; td_count <= FIELD_WIDTH; td_count++){
            td_used[tr_count - 1][td_count - 1] = false;
          }
        }
        /*for(tr_count = 1; tr_count <= FIELD_WIDTH; tr_count++){
          for(td_count = 1; td_count <= FIELD_WIDTH; td_count++){
            td_used[tr_count - 1][td_count - 1] = false;
          }
        }*/

        var guess_x, guess_y;

        /*用來保存每一格目前圖片號碼的二維陣列*/
        var td_image = [];

        for(tr_count = 1; tr_count <= FIELD_WIDTH; tr_count++){
          td_image[tr_count - 1] = [];
          for(td_count = 1; td_count <= FIELD_WIDTH; td_count++){
            td_image[tr_count - 1][td_count -1] = 0;
          }
        }
        /*for(tr_count = 1; tr_count <= FIELD_WIDTH; tr_count++){
          for(td_count = 1; td_count <= FIELD_WIDTH; td_count++){
            td_image[tr_count - 1][td_count -1] = 0;
          }
        }*/

        /**從最外層node連接到最內層**/
        /*建立tbody、table元素*/
        insert_table_node = document.createElement("table");
        insert_table_node.className="generic_table";

        insert_tbody_node = document.createElement("tbody");

        /*建立4個列*/
        for(tr_count = 1; tr_count <= FIELD_WIDTH; tr_count++){
          /*Debug message
          window.alert("Making <tr>");*/

          /*建立tr元素*/
          insert_tr_node = document.createElement("tr");

          /*每列建立4個欄*/
          for(td_count = 1; td_count <= FIELD_WIDTH; td_count++){
            /*建立td元素*/
            insert_td_node = document.createElement("td");

            /*插入圖片*/
            insert_img_node = document.createElement("img");

            /*在還沒找到沒用過的xy位置之前隨便猜一個圖片xy位置*/
            do{
              guess_x = Math.floor((Math.random() * FIELD_WIDTH) + 1);
              guess_y = Math.floor((Math.random() * FIELD_WIDTH) + 1);
            }while(td_used[guess_x - 1][guess_y - 1] == true);
            td_used[guess_x - 1][guess_y - 1] = true;

            /*如果有圖片的話就插入資源位址*/
            if(guess_x * guess_y != Math.pow(FIELD_WIDTH, 2) ){
              insert_img_node.src = "Resources/15_images/" + guess_x + guess_y + ".GIF";
            }
            else{
              /*沒有的話就不顯示*/
              insert_img_node.src = "";
              insert_img_node.style.display = "none";
            }

            /*紀錄每張圖片的位置對應序號*/
            td_image[guess_x - 1][guess_y - 1] = guess_x * 10 + guess_y;

            /*加入圖片替代訊息*/
            insert_img_node.alt = "a \"game of 15\" image";

            /*插入event
              insert_td_node.onClick = "doClick(" tr_count + ", "+ td_count + ")";
              insert_td_node.*/

            /*img插入td中*/
            insert_td_node.appendChild(insert_img_node);

            /*td插入tr中*/
            insert_tr_node.appendChild(insert_td_node);
          }

          /*插入tbody中*/
          insert_tbody_node.appendChild(insert_tr_node);
        }
        /*tbody插入table中*/
        insert_table_node.appendChild(insert_tbody_node);

        /*table元素準備完成，移除等待訊息，table插入div中*/
        game_node.replaceChild(insert_table_node, document.getElementById("loading_msg"));


        return;
      }


      //-->
    </script>
  </head>
  <!--body標籤：包含網頁的內容(content)
        XHTML規範需要／選用的屬性：
          xml:lang：用來宣告XML使用的語言
        參考網址：https://developer.mozilla.org/en/HTML/Element/body
    -->
  <body xml:lang="zh-TW" lang="zh-TW" class='generic_body' onload='initGameTable();'>
    <!--header-->
    <!--版本：1.01(1)201112021727-->
    <div class='div_header'>
      <div id='div_header_left'>
        <a href='../../' target='_self'>到外層頁面</a>
      </div>
      <div id='div_header_center'>
        <!--<a href='javascript:window.history.back();' target='_self'>到外層頁面</a>-->
      </div>
      <div id='div_header_right'>
        <!--<a href='' target='_self'></a>-->
      </div>
      <hr />
    </div>
    <div class='div_content'>
    <!--遊戲table（已被Javascript取代）-->
      <div id='div_game_content'>
        <span id='loading_msg'><em>遊戲載入中，請稍候……</em></span>
      </div>
    </div>
    <!--footer-->
    <!--版本：1.00(0)201112012220-->
    <div class='div_footer'>
      <hr />
      <!--W3C HTML Markup Validator通過之後可以放上此圖片-->
      <a href="http://validator.w3.org/check?uri=referer" target='_blank'>
        <img src="http://www.w3.org/Icons/valid-xhtml10"
             alt="W3C HTML Markup Validation Service驗證(XHTML 1.0)通過圖示 | W3C HTML Markup Validater Service Verification Passed Icon"
             height="31" width="88" />
      </a><br />
      這個圖示代表了這個網頁的開發者致力於讓這個網頁的內容能盡量符合W3C的規範，讓不同的網頁瀏覽器能更加正確的顯示這個網頁而不會出現相容性問題。您可以點擊這個圖示讓W3C的Markup Validation Service再次對這個網頁進行檢查。
      <hr />
      <!--W3C CSS Validator通過之後可以放上此圖片-->
      <a href="http://jigsaw.w3.org/css-validator/check/referer" target=      '_blank'>
        <img style="border:0;width:88px;height:31px"
             src="http://jigsaw.w3.org/css-validator/images/vcss"
             alt="W3C CSS Validation Service驗證通過圖示 | W3C CSS Validater Service Verification Passed Icon" />
      </a><br />
      這個圖示代表了這個網頁的開發者致力於讓這個網頁使用的CSS（Cascading Style Sheets，層疊樣式表）的內容能盡量符合W3C的規範，讓不同的網頁瀏覽器能更加正確的顯示這個網頁而不會出現相容性問題。您可以點擊這個圖示讓W3C的CSS Validation Service再次對這個網頁進行檢查。
    </div>
  </body>
</html>
